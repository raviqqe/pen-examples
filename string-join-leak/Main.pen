import System'Context { Context }
import Core'String

command = \(ctx Context) none | error {
  s = String'Join([string "foo", ""], "")

  if [s, ..._] = [string s] {
    s()
  } else {
    none
  }

  command(ctx)
}

main = \(ctx Context) number {
  if e = command(ctx) as none {
    0
  } else {
    1
  }
}
