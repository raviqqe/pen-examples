import Core'Map
import Test'Assert
import 'stringMap

TestMapNew = \() none | error {
  m = stringMap'New()

  Assert'EqualNumbers(stringMap'Size(m), 0)
}

TestMapSet = \() none | error {
  m = stringMap'Set(stringMap'New(), "", "")

  Assert'EqualNumbers(stringMap'Size(m), 1)
}

TestMapSetTwice = \() none | error {
  m = stringMap'Set(stringMap'New(), "foo", "")
  m = stringMap'Set(m, "bar", "")

  Assert'EqualNumbers(stringMap'Size(m), 2)
}

TestMapSetSameTwice = \() none | error {
  m = stringMap'Set(stringMap'New(), "foo", "")
  m = stringMap'Set(m, "foo", "")

  Assert'EqualNumbers(stringMap'Size(m), 1)
}

TestMapGet = \() none | error {
  key = "foo"
  value = "bar"

  m = stringMap'Set(stringMap'New(), key, value)

  Assert'True(stringMap'Get(m, key) == value)
}

TestMapFailGet = \() none | error {
  m = stringMap'Set(stringMap'New(), "foo", "")

  Assert'EqualNumbers(stringMap'Size(m), 2)
}
